TF<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = RR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$TF,
c(0.05, 0.95),
na.rm = T))
grid.arrange(HR,BP_mean,BP_Systolic,TF,rr)
HR<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = HR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$HR,
c(0.05, 0.95),
na.rm = T))
BP_mean<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = BP_mean)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$BP_mean,
c(0.05, 0.95),
na.rm = T))
BP_Systolic<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = BP_Systolic)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$BP_Systolic,
c(0.05, 0.95),
na.rm = T))
RR<-chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = RR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$RR,
c(0.05, 0.95),
na.rm = T))
TF<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = RR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$TF,
c(0.05, 0.95),
na.rm = T))
grid.arrange(HR,BP_mean,BP_Systolic,TF,rr)
d_items_tble <- read_csv(str_c(mimic_path, "/icu/d_items.csv.gz"))
chartevents_tble1<-chartevents_tble  %>% left_join(select(d_items_tble, itemid, label),
by = c("itemid")) %>%
select(-c(itemid, charttime, intime, outtime)) %>%
pivot_wider(names_from = label, values_from = valuenum) %>%
rename(HR = "Heart Rate", RR = "Respiratory Rate",
BP_mean = "Non Invasive Blood Pressure systolic",
BP_Systolic = "Non Invasive Blood Pressure mean",
TF = "Temperature Fahrenheit")
chartevents_tble1<-chartevents_tble1[,-2]
chartevents_tble1<-chartevents_tble1[,-2]
summary(chartevents_tble1[-1])
HR<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = HR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$HR,
c(0.05, 0.95),
na.rm = T))
BP_mean<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = BP_mean)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$BP_mean,
c(0.05, 0.95),
na.rm = T))
BP_Systolic<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = BP_Systolic)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$BP_Systolic,
c(0.05, 0.95),
na.rm = T))
RR<-chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = RR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$RR,
c(0.05, 0.95),
na.rm = T))
TF<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = RR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$TF,
c(0.05, 0.95),
na.rm = T))
grid.arrange(HR,BP_mean,BP_Systolic,TF,rr)
#combine with admission.csv.gz
mimic_icu_cohort <-
icustays_tble %>%
left_join(admissions_tble, by = c("subject_id", "hadm_id"))
#combine with patients.csv.gz
mimic_icu_cohort <-
patients_tble %>%
left_join(mimic_icu_cohort, by = c("subject_id"))
#combine with first lab measurements during ICU stay
mimic_icu_cohort <-
labevents_tble1 %>%
left_join(mimic_icu_cohort, by = c("subject_id"))
#combine with first lab measurements during ICU stay
mimic_icu_cohort <-
chartevents_tble1 %>%
left_join(mimic_icu_cohort, by = c("subject_id"))
#age
mimic_icu_cohort<-mimic_icu_cohort %>% mutate(age_ad = anchor_age + year(admittime) - anchor_year) %>%
filter(age_ad > 18) %>%
mutate(thirty_day_mort = ifelse(as.Date(deathtime) - as.Date(admittime) > 30,
1,0))%>%
print(width = Inf)
# numerical
mimic_icu_cohort %>%
group_by(thirty_day_mort, ethnicity) %>%
summarise(count = n()) %>%
spread(key = ethnicity , value = count) %>%
rowwise() %>%
mutate(total = sum(c_across("AMERICAN INDIAN/ALASKA NATIVE":"WHITE"),
na.rm = T)) %>%
mutate_at(vars("AMERICAN INDIAN/ALASKA NATIVE":"WHITE"),
funs(round(./ total, digits = 3)*100)) %>%
print(width = Inf)
# numerical
mimic_icu_cohort %>%
group_by(thirty_day_mort, language) %>%
summarise(count = n()) %>%
spread(key = language , value = count) %>%
rowwise() %>%
mutate(total = sum(c_across("?":"ENGLISH"),
na.rm = T)) %>%
mutate_at(vars("?":"ENGLISH"),
funs(round(./ total, digits = 3)*100)) %>%
print(width = Inf)
mimic_icu_cohort %>%
ggplot(mapping = aes(x = " ",
y = RR)) +
geom_boxplot(outlier.shape = NA) +
facet_wrap( ~ thirty_day_mort, scale="free") +
coord_cartesian(ylim = quantile(mimic_icu_cohort$RR,
c(0.05, 0.95),
na.rm = T))
HR<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = HR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$HR,
c(0.05, 0.95),
na.rm = T))
BP_mean<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = BP_mean)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$BP_mean,
c(0.05, 0.95),
na.rm = T))
BP_Systolic<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = BP_Systolic)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$BP_Systolic,
c(0.05, 0.95),
na.rm = T))
RR<-chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = RR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = c(0,40),
na.rm = T))
HR<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = HR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$HR,
c(0.05, 0.95),
na.rm = T))
BP_mean<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = BP_mean)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$BP_mean,
c(0.05, 0.95),
na.rm = T))
BP_Systolic<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = BP_Systolic)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$BP_Systolic,
c(0.05, 0.95),
na.rm = T))
RR<-chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = RR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = c(0,40),
na.rm = T)
HR<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = HR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$HR,
c(0.05, 0.95),
na.rm = T))
BP_mean<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = BP_mean)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$BP_mean,
c(0.05, 0.95),
na.rm = T))
BP_Systolic<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = BP_Systolic)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$BP_Systolic,
c(0.05, 0.95),
na.rm = T))
RR<-chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = RR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = c(0,40))
TF<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = RR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$TF,
c(0.05, 0.95),
na.rm = T))
grid.arrange(HR,BP_mean,BP_Systolic,TF,RR)
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = RR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = c(0,40))
RR
HR<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = HR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$HR,
c(0.05, 0.95),
na.rm = T))
BP_mean<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = BP_mean)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$BP_mean,
c(0.05, 0.95),
na.rm = T))
BP_Systolic<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = BP_Systolic)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$BP_Systolic,
c(0.05, 0.95),
na.rm = T))
RR<-chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = RR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = c(0,40))
TF<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = RR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$TF,
c(0.05, 0.95),
na.rm = T))
grid.arrange(HR,BP_mean,BP_Systolic,TF,RR)
HR<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = HR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$HR,
c(0.05, 0.95),
na.rm = T))
BP_mean<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = BP_mean)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$BP_mean,
c(0.05, 0.95),
na.rm = T))
BP_Systolic<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = BP_Systolic)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$BP_Systolic,
c(0.05, 0.95),
na.rm = T))
RR<-chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = RR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = c(0,40))
TF<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = RR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$TF,
c(0.05, 0.95),
na.rm = T))
grid.arrange(HR,BP_mean,BP_Systolic,TF,RR)
HR<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = HR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$HR,
c(0.05, 0.95),
na.rm = T))
BP_mean<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = BP_mean)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$BP_mean,
c(0.05, 0.95),
na.rm = T))
BP_Systolic<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = BP_Systolic)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$BP_Systolic,
c(0.05, 0.95),
na.rm = T))
RR<-chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = RR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = c(0,40))
TF<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = TF)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$TF,
c(0.05, 0.95),
na.rm = T))
grid.arrange(HR,BP_mean,BP_Systolic,TF,RR)
HR<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = HR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$HR,
c(0.05, 0.95),
na.rm = T))
BP_mean<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = BP_mean)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$BP_mean,
c(0.05, 0.95),
na.rm = T))
BP_Systolic<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = BP_Systolic)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$BP_Systolic,
c(0.05, 0.95),
na.rm = T))
RR<-chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = RR)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$RR,
c(0.05, 0.95),
na.rm = T))
TF<-
chartevents_tble1 %>%
ggplot(mapping = aes(x = " ",
y = TF)) +
geom_boxplot(outlier.shape = NA) +
coord_cartesian(ylim = quantile(chartevents_tble1$TF,
c(0.05, 0.95),
na.rm = T))
grid.arrange(HR,BP_mean,BP_Systolic,TF,RR)
HR<-
mimic_icu_cohort %>%
ggplot(mapping = aes(x = " ",
y = HR)) +
geom_boxplot(outlier.shape = NA) +
facet_wrap( ~ thirty_day_mort, scale="free") +
coord_cartesian(ylim = quantile(mimic_icu_cohort$HR,
c(0.05, 0.95),
na.rm = T))
BP_mean<-
mimic_icu_cohort %>%
ggplot(mapping = aes(x = " ",
y = BP_mean)) +
geom_boxplot(outlier.shape = NA) +
facet_wrap( ~ thirty_day_mort, scale="free") +
coord_cartesian(ylim = quantile(mimic_icu_cohort$BP_mean,
c(0.05, 0.95),
na.rm = T))
BP_Systolic<-
mimic_icu_cohort %>%
ggplot(mapping = aes(x = " ",
y = BP_Systolic)) +
geom_boxplot(outlier.shape = NA) +
facet_wrap( ~ thirty_day_mort, scale="free") +
coord_cartesian(ylim = quantile(mimic_icu_cohort$BP_Systolic,
c(0.05, 0.95),
na.rm = T))
RR<-
mimic_icu_cohort %>%
ggplot(mapping = aes(x = " ",
y = RR)) +
geom_boxplot(outlier.shape = NA) +
facet_wrap( ~ thirty_day_mort, scale="free") +
coord_cartesian(ylim = quantile(mimic_icu_cohort$RR,
c(0.05, 0.95),
na.rm = T))
TF<-
mimic_icu_cohort %>%
ggplot(mapping = aes(x = " ",
y = TF) +
geom_boxplot(outlier.shape = NA) +
facet_wrap( ~ thirty_day_mort, scale="free") +
coord_cartesian(ylim = quantile(mimic_icu_cohort$TF,
c(0.05, 0.95),
na.rm = T))
grid.arrange(HR,BP_mean,BP_Systolic,TF,RR )
HR<-
mimic_icu_cohort %>%
ggplot(mapping = aes(x = " ",
y = HR)) +
geom_boxplot(outlier.shape = NA) +
facet_wrap( ~ thirty_day_mort, scale="free") +
coord_cartesian(ylim = quantile(mimic_icu_cohort$HR,
c(0.05, 0.95),
na.rm = T))
BP_mean<-
mimic_icu_cohort %>%
ggplot(mapping = aes(x = " ",
y = BP_mean)) +
geom_boxplot(outlier.shape = NA) +
facet_wrap( ~ thirty_day_mort, scale="free") +
coord_cartesian(ylim = quantile(mimic_icu_cohort$BP_mean,
c(0.05, 0.95),
na.rm = T))
BP_Systolic<-
mimic_icu_cohort %>%
ggplot(mapping = aes(x = " ",
y = BP_Systolic)) +
geom_boxplot(outlier.shape = NA) +
facet_wrap( ~ thirty_day_mort, scale="free") +
coord_cartesian(ylim = quantile(mimic_icu_cohort$BP_Systolic,
c(0.05, 0.95),
na.rm = T))
RR<-
mimic_icu_cohort %>%
ggplot(mapping = aes(x = " ",
y = RR)) +
geom_boxplot(outlier.shape = NA) +
facet_wrap( ~ thirty_day_mort, scale="free") +
coord_cartesian(ylim = quantile(mimic_icu_cohort$RR,
c(0.05, 0.95),
na.rm = T))
TF<-
mimic_icu_cohort %>%
ggplot(mapping = aes(x = " ",
y = TF)) +
geom_boxplot(outlier.shape = NA) +
facet_wrap( ~ thirty_day_mort, scale="free") +
coord_cartesian(ylim = quantile(mimic_icu_cohort$TF,
c(0.05, 0.95),
na.rm = T))
grid.arrange(HR,BP_mean,BP_Systolic,TF,RR)
admissions_tble %>%
mutate(length =as.numeric(admissions_tble$dischtime - admissions_tble$admittime)/3600) %>%
ggplot(aes( x= length )) +
geom_bar()
admissions_tble %>%
mutate(length =as.numeric(admissions_tble$dischtime - admissions_tble$admittime)/3600) %>%
ggplot(aes( x= length )) +
geom_bar()+
coord_cartesian(xlim = c(0,50))
